===============class 17==================

Kubernetes Probes
=================
liveness probe
readiness probe

==> readiness probe: If your app is ready to receive traffic. If it fails, k8s stops sending new requests to that pod and doesn't restart the pod
(When to allow and when to stop the traffic to the pods)

=> Traffic routing (stops sending new connections to pods which are not ready)

==> liveness probe: If your app is alive and healthy. If it fails, k8s will restart container
(When to restart the container when issue is not resolved)

=> Container restart  (terminates and restart container)


=======================================================

HELM
=====

Amazon Linux / Red Had ==> yum
Ubuntu ===> apt

Helm is a package manager which is used to install required softwares in k8s cluster

Similar to yum/apt package manager in Linux distribution HELM allows us to install applications on Kubernetes cluster

HELM used charts in order to achieve this

Charts here refers to collection of configuration files (manifest yml)

Using HELM charts we can install Prometheus server, Grafana server, ArgoCd ......)

https://helm.sh/

https://artifacthub.io/

HELM Repo : It has all the helm repos which is publicly available 

ArgoCD
=======

Continuous deployment tool for k8s

Argo is a tool and CD - Continuous deployment

If we make any changes in yml files(k8sw manifest files) available in GitHub ArgoCD comes into picture

It automates the deployment of application to k8s clusters

ArgoCD will continuously monitor the git repository for the changes and automatically apply them to the k8s cluster

Install Helm
============

$ curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3

$ chmod 700 get_helm.sh

$ ./get_helm.sh

$ helm version

version.BuildInfo{Version:"v3.19.0", GitCommit:"3d8990f0836691f0229297773f3524598f46bda6", GitTreeState:"clean", GoVersion:"go1.24.7"}


Install ArgoCD with Helm
========================

$ helm repo add argo https://argoproj.github.io/argo-helm

Recommended to create namespace and install tools and s/ws

$ kubectl create namespace argocd
namespace/argocd created


$ helm install argocd argo/argo-cd --namespace argocd


$ kubectl get all -n argocd

Expose ArgoCD server
=========================
$ kubectl patch svc argocd-server -n argocd -p '{"spec": {"type": "LoadBalancer"}}'

To access the argo cd server ui use load balancer dns 

The user name is admin

In order to access the server UI 

After reaching the UI the first time you can login with username: admin and the random password generated during the installation. You can find the password by running:

To get ArgoCD password

$ kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d



EFK (Elasticsearch , Fluentd and Kibana)
=========================================
Fluentd collects these (pods) logs, forwards them to Elastic Search for storage and Kibana is used to create dashboard showing logs, error rates, api response time, pod specific issues which will help to trouble shoot and resolve issues.

EFK stack provides centralised logging in order to identify problems with servers or applications. It will help us to reach to search all the logs in a single place









